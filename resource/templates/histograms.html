<div class="decision-rule-section">
    <div class="selected-node-info">
        <div class="placeholder-node">
            <svg height="100%" width="100%"></svg>
        </div>
        <div>
            <p>
                <strong>{{ selectedNode.samples[0] }}</strong> samples (<strong>{{ toFixedIfNeeded(selectedNode.samples[1], 2, true) }}%</strong> of the whole dataset).
            </p>
            <p>
                Global error (% wrong predictions over total) is <strong>{{ toFixedIfNeeded(selectedNode.global_error*100, 2, true) }}%</strong>.
            </p>
            <p>
                Local error (% wrong predictions over node samples) is <strong>{{ toFixedIfNeeded(selectedNode.localError*100, 2, true) }}%</strong>.
            </p>
        </div>
    </div>
    <div>
        <div class="header">
            <div class="header-decision-rule header-div">
                Decision rule
            </div>
        </div>
        <div class="info-section" ng-class="{'info-section--expanded': displayRule}">
            <div class="info" ng-repeat="rule in decisionRule" title="{{ rule.left + ' ' + rule.middle + ' ' + rule.right }}">
                <span ng-if="$index">â†³&nbsp;</span>
                <div class="ellipsed-text" ng-class="{'no-shrink-no-grow': rule.numerical, 'no-grow': !rule.numerical}" ng-if="rule.left">{{ rule.left }}&nbsp;</div>
                <div class="ellipsed-text" ng-class="{'no-shrink-no-grow': !rule.numerical, 'no-grow': rule.numerical}">{{ rule.middle }}&nbsp;</div>
                <div class="ellipsed-text" ng-class="{'no-shrink-no-grow': rule.numerical, 'no-grow': !rule.numerical}" ng-if="rule.right">{{ rule.right }}</div>
            </div>
        </div>
        <div ng-show="decisionRule.length > 3">
            <span class="link" ng-click="displayRule = !displayRule">
                Show {{ displayRule ? 'less' : 'more' }}&nbsp;<i ng-class="{'icon-chevron-down': !displayRule, 'icon-chevron-up': displayRule}"></i>
            </span>
        </div>
    </div>
</div>

<div class="histograms-container">
    <div class="legend-container">
        <div class="legend-description">
            Prediction distribution
        </div>
        <div class="legend-details">
            <svg height="20px" width="50%">
                <g>
                    <rect height="20" width="8" x="4" fill="{{colors['Wrong prediction']}}"></rect>
                    <rect height="20" width="8" x="12" fill="{{colors['Correct prediction']}}"> </rect>
                    <text x="24" y="15">Local (this node)</text>
                </g>
            </svg>
            <svg height="20px" width="50%">
                <g>
                    <rect class="color-bar__global-legend" height="20" width="8" x="4" fill="{{colors['Wrong prediction']}}"></rect>
                    <rect class="color-bar__global-legend" height="20" width="8" x="12" fill="{{colors['Correct prediction']}}"> </rect>
                    <text x="24" y="15">Global (whole set)</text>
                </g>
            </svg>
        </div>
    </div>
    <div class="histograms">  
        <div ng-repeat="feature in rankedFeatures">
            <div class="header header-feature">
                <div class="header-feature-desc  header-div header-div--uppercase">
                    <i class="icon-font" ng-show="!features.hasOwnProperty(feature)"></i>
                    <div class="numerical" ng-show="features.hasOwnProperty(feature)">#</div>
                    <div class="ellipsed-text" title="{{feature}}">&emsp;{{feature}}</div>
                </div>
            </div>

            <div class="histogram-placeholder histogram-placeholder-empty" ng-if="histData[feature].count.length == 0">
                <em>No values</em>
            </div>
            <div histogram="{{feature}}" class="histogram-placeholder" ng-if="histData[feature].count.length > 0">
                <div class="histogram-svg"></div>
            </div>
        </div>
    </div>
</div>
